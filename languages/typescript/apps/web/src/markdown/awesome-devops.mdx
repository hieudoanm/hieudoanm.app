# DevOps

## Docker

### Image Layers

- Each layer is an image itself, just one without a human-assigned tag. They have auto-generated IDs though.
- Each layer stores the changes compared to the image it's based on.
- An image can consist of a single layer (that's often the case when the squash command was used).
- Each instruction in a Dockerfile results in a layer. (Except for multi-stage builds, where usually only the layers in the final image are pushed, or when an image is squashed to a single layer).
- Layers are used to avoid transferring redundant information and skip build steps which have not changed (according to the Docker cache).

### Cached

- Its parent image exists in the cache
- The Dockerfile instruction corresponding to the layer is unchanged (or in case of ADD/COPY, the involved files are exactly the same)
- Cache Gotcha #1: `RUN apt-get update`
- Using the Cache Well: it is better to update the package management files (`package.json` & `requirements.txt`), you only have to do it once.

## PaaS / IaaS

|                |                 | Render   | Vercel     | [AWS][aws]                                | [Azure][azure]                     | [Google Cloud][google-cloud] | [IBM Cloud][ibm-cloud] | [Digital Ocean][do]                 | Open Source            |
| -------------- | --------------- | -------- | ---------- | ----------------------------------------- | ---------------------------------- | ---------------------------- | ---------------------- | ----------------------------------- | ---------------------- |
| Database       | Key-Value       | Redis    | KV (Redis) |                                           | Cache for Redis                    |                              |                        | Redis                               |                        |
| Database       | Document        |          |            |                                           |                                    | Firestore                    |                        | MongoDB                             |                        |
| Database       | Relational      | Postgres | Postgres   |                                           | Database for SQL                   |                              |                        | PostgreSQL                          |                        |
| Database       | Relational      |          |            |                                           |                                    |                              |                        | MySQL                               |                        |
| Database       | Search Engine   |          |            |                                           |                                    |                              |                        |                                     |                        |
| Database       | Multi Model     |          |            |                                           | Cosmos DB                          |                              |                        |                                     |                        |
| Files          | Block Storage   |          | Blob       |                                           | Volumes Block Storage              |                              |                        |                                     |                        |
| Files          | Block Storage   |          |            |                                           | Spaces Object Storage              |                              |                        |                                     |                        |
| Files          | Data Storage    |          |            |                                           |                                    |                              |                        |                                     |                        |
| PaaS           |                 |          |            | [Elastic Beanstalk][aws-elasticbeanstalk] | App Service                        | Google App Engine            |                        | App Platform                        |                        |
| Serverless     |                 |          |            | [Lambda][aws-lambda]                      | Functions                          | Cloud Functions              |                        |                                     |                        |
| Container      | Registry        |          |            |                                           | Container Registry                 | Container Registry           |                        |                                     |                        |
| Container      | Kubernetes      |          |            |                                           | AKS                                | Kubernetes Engine            |                        |                                     |                        |
| Compute        |                 |          |            | [EC2][aws-ec2]                            | Virtual Machines (Linux & Windows) | Compute Engine               |                        |                                     |                        |
| Networking     | Load Balancing  |          |            | [ELB][aws-elb]                            | Load Balancer                      | Cloud Load Balancing         |                        | [Load Balancers][do-load-balancers] |                        |
| Networking     | DNS             |          |            | [Route 53][aws-route53]                   | DNS                                | Cloud DNS                    |                        | DNS                                 |                        |
| Networking     | Virtual Network |          |            | [VPC][aws-vpc]                            | Virtual Network                    | VPC                          |                        | VPC                                 |                        |
| Networking     | Firewall        |          |            |                                           | Firewall                           |                              |                        | [Firewalls][do-firewalls]           |                        |
| Networking     | IPs             |          |            |                                           |                                    |                              |                        | [Reserved IPs][do-reserved-ips]     |                        |
|                |                 |          |            | [Systems Manager][aws-systems-manager]    | Key Vault                          |                              |                        |                                     |                        |
| BaaS           |                 |          |            |                                           |                                    | Firebase                     |                        |                                     |                        |
| Message Broker |                 |          |            | Service Bus                               |                                    |                              |                        |                                     |                        |
| CI/CD          |                 |          |            |                                           |                                    |                              |                        |                                     |                        |
| IaC            |                 |          |            | [CloudFormation][aws-cloudformation]      |                                    |                              |                        |                                     | [Terraform][terraform] |

[aws]: https://aws.amazon.com/
[aws-cloudformation]: https://aws.amazon.com/cloudformation/
[aws-ec2]: https://aws.amazon.com/ec2/
[aws-elasticbeanstalk]: https://aws.amazon.com/elasticbeanstalk/
[aws-elb]: https://aws.amazon.com/elasticloadbalancing/
[aws-lambda]: https://aws.amazon.com/lambda/
[aws-route53]: https://aws.amazon.com/route53/
[aws-systems-manager]: https://aws.amazon.com/systems-manager/
[aws-vpc]: https://aws.amazon.com/vpc/
[azure]: https://azure.microsoft.com/
[do]: https://docs.digitalocean.coms
[do-firewalls]: https://docs.digitalocean.com/products/networking/firewalls/
[do-load-balancers]: https://docs.digitalocean.com/products/networking/load-balancers/
[do-reserved-ips]: https://docs.digitalocean.com/products/networking/reserved-ips/
[google-cloud]: https://cloud.google.com/
[ibm-cloud]: https://www.ibm.com/cloud/
[terraform]: https://www.terraform.io/
